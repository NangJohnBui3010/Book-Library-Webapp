{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function BookStore(){const[searchQuery,setSearchQuery]=useState(\"\");const[bookData,setBookData]=useState(null);const[loading,setLoading]=useState(false);const[favorites,setFavorites]=useState({});const[welcome,setWelcome]=useState(true);async function fetchData(){setWelcome(false);setLoading(true);try{const query=searchQuery;console.log(searchQuery);const response=await fetch(`https://openlibrary.org/search.json?q=${query.split(\" \").join(\"+\")}`);const data=await response.json();setBookData(data);}catch(err){console.log(err);}finally{setLoading(false);}}function keyHandle(event){if(event.key===\"Enter\"){fetchData();}}const toggleFavorite=bookId=>{setFavorites(prev=>({...prev,[bookId]:!prev[bookId]}));};const refreshPage=()=>{window.location.reload();};return/*#__PURE__*/_jsxs(\"div\",{className:\"book-store-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navigation-bar\",children:[/*#__PURE__*/_jsx(\"h1\",{onClick:refreshPage,style:{cursor:'pointer'},children:\"Book Store\"}),/*#__PURE__*/_jsx(\"input\",{className:\"search-bar\",type:\"text\",placeholder:\"Search for titles, author, etc.\",onKeyDown:keyHandle,value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"favorites-button\",children:\"Favorited\"}),/*#__PURE__*/_jsx(\"button\",{className:\"your-library-button\",children:\"Your library\"})]}),welcome?/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to the Book Store!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Search for your favorite books, add them to your library, and mark them as favorites.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Get started by entering a search term above.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading results...\"})]}),!loading&&bookData&&/*#__PURE__*/_jsx(\"div\",{className:\"book-shelf\",children:bookData.docs.map(book=>/*#__PURE__*/_jsxs(\"div\",{className:\"book-from-bookstore\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"book-thumbnail\",src:`https://covers.openlibrary.org/b/olid/${book.cover_edition_key}-M.jpg`,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:book.title}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Author: \",book.author_name]}),/*#__PURE__*/_jsxs(\"h3\",{children:[Array.isArray(book.publisher)?book.publisher.length:0,\" publishers\"]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Publish Date: \",book.first_publish_year]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:`favorite-button ${favorites[book.id]?'favorited':''}`,\"aria-label\":favorites[book.id]?\"Remove from favorites\":\"Add to favorites\",onClick:event=>{toggleFavorite(book.id);const button=event.currentTarget;button.classList.add('animate');setTimeout(()=>button.classList.remove('animate'),700);},children:/*#__PURE__*/_jsx(\"svg\",{className:\"heart-icon\",viewBox:\"0 0 24 24\",width:\"24\",height:\"24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"})})}),/*#__PURE__*/_jsx(\"button\",{className:\"add-to-library-button\",children:\"Add to library\"})]})]},book.id))})]})]});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BookStore","searchQuery","setSearchQuery","bookData","setBookData","loading","setLoading","favorites","setFavorites","welcome","setWelcome","fetchData","query","console","log","response","fetch","split","join","data","json","err","keyHandle","event","key","toggleFavorite","bookId","prev","refreshPage","window","location","reload","className","children","onClick","style","cursor","type","placeholder","onKeyDown","value","onChange","e","target","docs","map","book","src","cover_edition_key","alt","title","author_name","Array","isArray","publisher","length","first_publish_year","id","button","currentTarget","classList","add","setTimeout","remove","viewBox","width","height","d"],"sources":["D:/IT/learn_node/books/client/src/pages/BookStore.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nexport default function BookStore(){\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [bookData, setBookData] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [favorites, setFavorites] = useState({});\r\n    const [welcome, setWelcome] = useState(true);\r\n    async function fetchData() {\r\n        setWelcome(false); \r\n        setLoading(true);\r\n        try {\r\n            const query = searchQuery;\r\n            console.log(searchQuery);\r\n            const response = await fetch(`https://openlibrary.org/search.json?q=${query.split(\" \").join(\"+\")}`);\r\n            const data = await response.json();\r\n            setBookData(data);\r\n        } catch (err) {\r\n            console.log(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    function keyHandle(event){\r\n        if(event.key ===\"Enter\"){\r\n            fetchData();\r\n        }\r\n    }\r\n\r\n    const toggleFavorite = (bookId) => {\r\n        setFavorites(prev => ({\r\n            ...prev,\r\n            [bookId]: !prev[bookId]\r\n        }));\r\n    };\r\n\r\n    const refreshPage = () => {\r\n        window.location.reload();\r\n    };\r\n\r\n    return(\r\n        <div className = \"book-store-page\">\r\n            <div className = \"navigation-bar\">\r\n                <h1 onClick={refreshPage} style={{ cursor: 'pointer' }}>Book Store</h1>\r\n                <input className = \"search-bar\" \r\n                    type = \"text\" \r\n                    placeholder = \"Search for titles, author, etc.\"\r\n                    onKeyDown={keyHandle}\r\n                    value = {searchQuery}\r\n                    onChange = {(e)=>setSearchQuery(e.target.value)}\r\n                ></input>\r\n                <button className = \"favorites-button\">Favorited</button>\r\n                <button className = \"your-library-button\">Your library</button>\r\n            </div>\r\n            {welcome ? (\r\n                <div className=\"welcome-section\">\r\n                    <h2>Welcome to the Book Store!</h2>\r\n                    <p>Search for your favorite books, add them to your library, and mark them as favorites.</p>\r\n                    <p>Get started by entering a search term above.</p>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    {loading && (\r\n                        <div className=\"loading-spinner\">\r\n                            <div className=\"spinner\"></div>\r\n                            <p>Loading results...</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {!loading && bookData && \r\n                    <div className = \"book-shelf\">\r\n                        {\r\n                            bookData.docs.map(book => (\r\n                                <div key={book.id} className = \"book-from-bookstore\">\r\n                                    <img className = \"book-thumbnail\" src={`https://covers.openlibrary.org/b/olid/${book.cover_edition_key}-M.jpg`} alt=\"\"></img>\r\n                                    <div className = \"book-info\">\r\n                                        <h2>{book.title}</h2>\r\n                                        <h3>Author: {book.author_name}</h3>\r\n                                        <h3>{Array.isArray(book.publisher) ? book.publisher.length : 0} publishers</h3>\r\n                                        <h3>Publish Date: {book.first_publish_year}</h3>\r\n                                    </div>\r\n                                    <div className = \"book-actions\">\r\n                                        <button \r\n                                            className={`favorite-button ${favorites[book.id] ? 'favorited' : ''}`}\r\n                                            aria-label={favorites[book.id] ? \"Remove from favorites\" : \"Add to favorites\"}\r\n                                            onClick={(event) => {\r\n                                                toggleFavorite(book.id);\r\n                                                const button = event.currentTarget;\r\n                                                button.classList.add('animate');\r\n                                                setTimeout(() => button.classList.remove('animate'), 700);\r\n                                            }}\r\n                                        >\r\n                                            <svg className=\"heart-icon\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\r\n                                                <path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\" />\r\n                                            </svg>\r\n                                        </button>\r\n                                        <button className = \"add-to-library-button\">Add to library</button>\r\n                            \r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        }\r\n                    </div>\r\n                    }\r\n                </>\r\n            )}\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}