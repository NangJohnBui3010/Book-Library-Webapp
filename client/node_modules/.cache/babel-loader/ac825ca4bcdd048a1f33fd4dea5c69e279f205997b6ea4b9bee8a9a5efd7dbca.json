{"ast":null,"code":"import { useCallback, useRef, useState, useEffect } from 'react';\nimport { createNanoEvents } from './nano-events';\nvar mainbus = createNanoEvents();\nvar subscribeCounter = 0;\nvar onFocusIn = function onFocusIn(event) {\n  return mainbus.emit('assign', event.target);\n};\nvar onFocusOut = function onFocusOut(event) {\n  return mainbus.emit('reset', event.target);\n};\nvar useDocumentFocusSubscribe = function useDocumentFocusSubscribe() {\n  useEffect(function () {\n    if (!subscribeCounter) {\n      document.addEventListener('focusin', onFocusIn);\n      document.addEventListener('focusout', onFocusOut);\n    }\n    subscribeCounter += 1;\n    return function () {\n      subscribeCounter -= 1;\n      if (!subscribeCounter) {\n        document.removeEventListener('focusin', onFocusIn);\n        document.removeEventListener('focusout', onFocusOut);\n      }\n    };\n  }, []);\n};\nvar getFocusState = function getFocusState(target, current) {\n  if (target === current) {\n    return 'self';\n  }\n  if (current.contains(target)) {\n    return 'within';\n  }\n  return 'within-boundary';\n};\nexport var useFocusState = function useFocusState(callbacks) {\n  if (callbacks === void 0) {\n    callbacks = {};\n  }\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useState2 = useState(''),\n    state = _useState2[0],\n    setState = _useState2[1];\n  var ref = useRef(null);\n  var focusState = useRef({});\n  var stateTracker = useRef(false);\n  useEffect(function () {\n    if (ref.current) {\n      var isAlreadyFocused = ref.current === document.activeElement || ref.current.contains(document.activeElement);\n      setActive(isAlreadyFocused);\n      setState(getFocusState(document.activeElement, ref.current));\n      if (isAlreadyFocused && callbacks.onFocus) {\n        callbacks.onFocus();\n      }\n    }\n  }, []);\n  var onFocus = useCallback(function (e) {\n    focusState.current = {\n      focused: true,\n      state: getFocusState(e.target, e.currentTarget)\n    };\n  }, []);\n  useDocumentFocusSubscribe();\n  useEffect(function () {\n    var fout = mainbus.on('reset', function () {\n      focusState.current = {};\n    });\n    var fin = mainbus.on('assign', function () {\n      var newState = focusState.current.focused || false;\n      setActive(newState);\n      setState(focusState.current.state || '');\n      if (newState !== stateTracker.current) {\n        stateTracker.current = newState;\n        if (newState) {\n          callbacks.onFocus && callbacks.onFocus();\n        } else {\n          callbacks.onBlur && callbacks.onBlur();\n        }\n      }\n    });\n    return function () {\n      fout();\n      fin();\n    };\n  }, []);\n  return {\n    active: active,\n    state: state,\n    onFocus: onFocus,\n    ref: ref\n  };\n};","map":{"version":3,"names":["useCallback","useRef","useState","useEffect","createNanoEvents","mainbus","subscribeCounter","onFocusIn","event","emit","target","onFocusOut","useDocumentFocusSubscribe","document","addEventListener","removeEventListener","getFocusState","current","contains","useFocusState","callbacks","_useState","active","setActive","_useState2","state","setState","ref","focusState","stateTracker","isAlreadyFocused","activeElement","onFocus","e","focused","currentTarget","fout","on","fin","newState","onBlur"],"sources":["D:/IT/learn_node/books/client/node_modules/react-focus-lock/dist/es2015/use-focus-state.js"],"sourcesContent":["import { useCallback, useRef, useState, useEffect } from 'react';\nimport { createNanoEvents } from './nano-events';\nvar mainbus = createNanoEvents();\nvar subscribeCounter = 0;\nvar onFocusIn = function onFocusIn(event) {\n  return mainbus.emit('assign', event.target);\n};\nvar onFocusOut = function onFocusOut(event) {\n  return mainbus.emit('reset', event.target);\n};\nvar useDocumentFocusSubscribe = function useDocumentFocusSubscribe() {\n  useEffect(function () {\n    if (!subscribeCounter) {\n      document.addEventListener('focusin', onFocusIn);\n      document.addEventListener('focusout', onFocusOut);\n    }\n    subscribeCounter += 1;\n    return function () {\n      subscribeCounter -= 1;\n      if (!subscribeCounter) {\n        document.removeEventListener('focusin', onFocusIn);\n        document.removeEventListener('focusout', onFocusOut);\n      }\n    };\n  }, []);\n};\nvar getFocusState = function getFocusState(target, current) {\n  if (target === current) {\n    return 'self';\n  }\n  if (current.contains(target)) {\n    return 'within';\n  }\n  return 'within-boundary';\n};\nexport var useFocusState = function useFocusState(callbacks) {\n  if (callbacks === void 0) {\n    callbacks = {};\n  }\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useState2 = useState(''),\n    state = _useState2[0],\n    setState = _useState2[1];\n  var ref = useRef(null);\n  var focusState = useRef({});\n  var stateTracker = useRef(false);\n  useEffect(function () {\n    if (ref.current) {\n      var isAlreadyFocused = ref.current === document.activeElement || ref.current.contains(document.activeElement);\n      setActive(isAlreadyFocused);\n      setState(getFocusState(document.activeElement, ref.current));\n      if (isAlreadyFocused && callbacks.onFocus) {\n        callbacks.onFocus();\n      }\n    }\n  }, []);\n  var onFocus = useCallback(function (e) {\n    focusState.current = {\n      focused: true,\n      state: getFocusState(e.target, e.currentTarget)\n    };\n  }, []);\n  useDocumentFocusSubscribe();\n  useEffect(function () {\n    var fout = mainbus.on('reset', function () {\n      focusState.current = {};\n    });\n    var fin = mainbus.on('assign', function () {\n      var newState = focusState.current.focused || false;\n      setActive(newState);\n      setState(focusState.current.state || '');\n      if (newState !== stateTracker.current) {\n        stateTracker.current = newState;\n        if (newState) {\n          callbacks.onFocus && callbacks.onFocus();\n        } else {\n          callbacks.onBlur && callbacks.onBlur();\n        }\n      }\n    });\n    return function () {\n      fout();\n      fin();\n    };\n  }, []);\n  return {\n    active: active,\n    state: state,\n    onFocus: onFocus,\n    ref: ref\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}